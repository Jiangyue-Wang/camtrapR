<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Consistency check on species image identification — checkSpeciesIdentification • camtrapR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Consistency check on species image identification — checkSpeciesIdentification" />
<meta property="og:description" content="This function serves 2 purposes: 1) it assesses possible misidentification of species and 2) compares double observer species identification (only if metadata tagging was used for species identification).
Within each station, it assesses whether there are images of a species taken within a given time interval of another species. Often, it is unlikely that different species are encountered within a very short time intervals at the same location. This type of misidentification can arise easily if some images belonging to a sequence of images were accidentally moved into different species directories or tagged incorrectly.
Double observer identification may be desirable to increase reliability of species identification. The function returns conflicts in species identification between 2 observers. These conflicts can then be corrected." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">camtrapR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/camtrapR1.html">1. Organising raw camera trap images in camtrapR</a>
    </li>
    <li>
      <a href="../articles/camtrapr2.html">2. Identifying species and individuals in camtrapR</a>
    </li>
    <li>
      <a href="../articles/camtrapr3.html">3. Extracting Data from Camera Trapping Images, creating occupancy &amp; secr input</a>
    </li>
    <li>
      <a href="../articles/camtrapr4.html">4. Data exploration and visualisation in camtrapR</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/jniedballa/camtrapR">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Consistency check on species image identification</h1>
    
    <div class="hidden name"><code>checkSpeciesIdentification.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function serves 2 purposes: 1) it assesses possible misidentification of species and 2) compares double observer species identification (only if metadata tagging was used for species identification).</p>
<p>Within each station, it assesses whether there are images of a species taken within a given time interval of another species. Often, it is unlikely that different species are encountered within a very short time intervals at the same location. This type of misidentification can arise easily if some images belonging to a sequence of images were accidentally moved into different species directories or tagged incorrectly.</p>
<p>Double observer identification may be desirable to increase reliability of species identification. The function returns conflicts in species identification between 2 observers. These conflicts can then be corrected.</p>
    </div>

    <pre class="usage"><span class='fu'>checkSpeciesIdentification</span>(<span class='no'>inDir</span>,
  <span class='no'>IDfrom</span>,
  <span class='no'>hasCameraFolders</span>,
  <span class='no'>metadataSpeciesTag</span>,
  <span class='no'>metadataSpeciesTagToCompare</span>,
  <span class='kw'>metadataHierarchyDelimitor</span> <span class='kw'>=</span> <span class='st'>"|"</span>,
  <span class='no'>maxDeltaTime</span>,
  <span class='no'>excludeSpecies</span>,
  <span class='no'>stationsToCheck</span>,
  <span class='kw'>writecsv</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>inDir</th>
      <td><p>character. Directory containing identified camera trap images sorted into station subdirectories (e.g. inDir/StationA/)</p></td>
    </tr>
    <tr>
      <th>IDfrom</th>
      <td><p>character. Read species ID from image metadata ("metadata") of from species directory names ("directory")?</p></td>
    </tr>
    <tr>
      <th>hasCameraFolders</th>
      <td><p>logical. Do the station directories in <code>inDir</code> have camera subdirectories (e.g. "inDir/StationA/Camera1" or "inDir/StationA/Camera1/Species1")?</p></td>
    </tr>
    <tr>
      <th>metadataSpeciesTag</th>
      <td><p>character. The species ID tag name in image metadata (if IDfrom = "metadata").</p></td>
    </tr>
    <tr>
      <th>metadataSpeciesTagToCompare</th>
      <td><p>character. A second species ID tag name in image metadata (if IDfrom = "metadata"). For comparing double observer species identification.</p></td>
    </tr>
    <tr>
      <th>metadataHierarchyDelimitor</th>
      <td><p>character. The character delimiting hierarchy levels in image metadata tags in field "HierarchicalSubject". Either "|" or ":"</p></td>
    </tr>
    <tr>
      <th>maxDeltaTime</th>
      <td><p>numeric. Maximum time interval between images to be returned (in seconds)</p></td>
    </tr>
    <tr>
      <th>excludeSpecies</th>
      <td><p>character. vector of species to exclude from checks</p></td>
    </tr>
    <tr>
      <th>stationsToCheck</th>
      <td><p>character. vector of stations to be checked (optionally)</p></td>
    </tr>
    <tr>
      <th>writecsv</th>
      <td><p>logical. Should the resulting data.frame be saved as a .csv?</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Images may accidentally be misidentified by assigning wrong species tags or by moving them into wrong species directories. Imagine your cameras take sequences of images each time they are triggered and one image of the sequence is misidentified. The time difference between these images (that have different species assigned to them) will be very small, usually a few seconds. This function will return all these images for you to check if they were identified correctly.</p>
<p>If multiple observers identify images independently using metadata tagging, their identifications can be compared by setting <code>metadataSpeciesTagToCompare</code>. Conflicting or missing identifications will be reported. This feature is only available if images were identified by metadata tagging.</p>
<p>Species like "blank" or "team" can be ignored using <code>excludeSpecies</code>. If only specific stations are to be checked, <code>stationsToCheck</code> can be set.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>list</code> containing 2 data frames. The first contains a data frame with images file names, directories, time stamp and species ID that were taken within <code>maxDeltaTime</code> seconds of another species image at a particular station.
The second data frame contains images with conflicting species IDs (if <code>IDfrom = "metadata"</code> and <code>metadataSpeciesTagToCompare</code> is defined)</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>The function will not be able to find "isolated" images, i.e. images that were misidentified, but were not part of a sequence of images. Likewise, if all images of a sequence were misidentified, they cannot be found either.
From version 0.99.0, the function can also handle images identied with metadata tags.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># \donttest{</span>
<span class='no'>wd_images_ID</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"pictures/sample_images"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"camtrapR"</span>)

<span class='kw'>if</span> (<span class='fu'><a href='https://rdrr.io/r/base/Sys.which.html'>Sys.which</a></span>(<span class='st'>"exiftool"</span>) <span class='kw'>!=</span> <span class='st'>""</span>){        <span class='co'># only run this example if ExifTool is available</span>
<span class='no'>check.folders</span> <span class='kw'>&lt;-</span> <span class='fu'>checkSpeciesIdentification</span>(<span class='kw'>inDir</span>             <span class='kw'>=</span> <span class='no'>wd_images_ID</span>,
                                            <span class='kw'>IDfrom</span>            <span class='kw'>=</span> <span class='st'>"directory"</span>,
                                            <span class='kw'>hasCameraFolders</span>  <span class='kw'>=</span> <span class='fl'>FALSE</span>,
                                            <span class='kw'>maxDeltaTime</span>      <span class='kw'>=</span> <span class='fl'>120</span>,
                                            <span class='kw'>writecsv</span>          <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='no'>check.folders</span>   <span class='co'># In the example, 2 different species were photographed within 2 minutes. </span>
}</div><div class='output co'>#&gt; <span class='message'>StationA : checking 8 images in 2 directories</span></div><div class='output co'>#&gt; <span class='message'>StationB : checking 23 images in 4 directories</span></div><div class='output co'>#&gt; <span class='message'>StationC : checking 37 images in 4 directories</span></div><div class='output co'>#&gt; $temporalIndependenceCheck
#&gt;     station
#&gt; 7  StationC
#&gt; 29 StationC
#&gt;                                                                                                               Directory
#&gt; 7  C:/Users/Juergen/AppData/Local/Temp/RtmpqUVYPt/temp_libpath101013f51f4d/camtrapR/pictures/sample_images/StationC/EGY
#&gt; 29 C:/Users/Juergen/AppData/Local/Temp/RtmpqUVYPt/temp_libpath101013f51f4d/camtrapR/pictures/sample_images/StationC/TRA
#&gt;                                 FileName species    DateTimeOriginal
#&gt; 7  StationC__2009-04-27__00-17-00(1).JPG     EGY 2009-04-27 00:17:00
#&gt; 29 StationC__2009-04-27__00-19-00(1).JPG     TRA 2009-04-27 00:19:00
#&gt; 
#&gt; $IDconflictCheck
#&gt; data frame with 0 columns and 0 rows
#&gt; </div><div class='input'><span class='co'># }</span>

<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'># now exclude one of these 2 species </span>
<span class='no'>check.folders2</span> <span class='kw'>&lt;-</span> <span class='fu'>checkSpeciesIdentification</span>(<span class='kw'>inDir</span>             <span class='kw'>=</span> <span class='no'>wd_images_ID</span>,
                                             <span class='kw'>IDfrom</span>            <span class='kw'>=</span> <span class='st'>"directory"</span>,
                                             <span class='kw'>hasCameraFolders</span>  <span class='kw'>=</span> <span class='fl'>FALSE</span>,
                                             <span class='kw'>maxDeltaTime</span>      <span class='kw'>=</span> <span class='fl'>120</span>,
                                             <span class='kw'>excludeSpecies</span>    <span class='kw'>=</span> <span class='st'>"EGY"</span>,
                                             <span class='kw'>writecsv</span>          <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='no'>check.folders2</span>   <span class='co'># the data frame is empty</span>

<span class='co'># now we check only one station</span>
<span class='no'>check.folders3</span> <span class='kw'>&lt;-</span> <span class='fu'>checkSpeciesIdentification</span>(<span class='kw'>inDir</span>             <span class='kw'>=</span> <span class='no'>wd_images_ID</span>,
                                             <span class='kw'>IDfrom</span>            <span class='kw'>=</span> <span class='st'>"directory"</span>,
                                             <span class='kw'>hasCameraFolders</span>  <span class='kw'>=</span> <span class='fl'>FALSE</span>,
                                             <span class='kw'>maxDeltaTime</span>      <span class='kw'>=</span> <span class='fl'>120</span>,
                                             <span class='kw'>stationsToCheck</span>   <span class='kw'>=</span> <span class='st'>"StationB"</span>,
                                             <span class='kw'>writecsv</span>          <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='no'>check.folders3</span>   <span class='co'># the data frame is empty</span>
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#note">Note</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Juergen Niedballa</p>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Juergen Niedballa, Alexandre Courtiol, Rahel Sollmann.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


