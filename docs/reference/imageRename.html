<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Copy and rename images based on camera trap station ID and creation date — imageRename • camtrapR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Copy and rename images based on camera trap station ID and creation date — imageRename" />
<meta property="og:description" content="The function renames and copies raw camera trap images into a new location where they can be identified. Images are renamed with camera trap station ID, camera ID (optional), creation date and a numeric identifier for images taken within one minute of each other at a given station. Station ID and camera ID are derived from the raw image directory structure. The creation date is extracted from image metadata using ExifTool." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">camtrapR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/camtrapr1.html">1. Organising raw camera trap images in camtrapR</a>
    </li>
    <li>
      <a href="../articles/camtrapr2.html">2. Species and Individual Identification</a>
    </li>
    <li>
      <a href="../articles/camtrapr3.html">3. Data Extraction from Images and videos, creating occupancy &amp; secr input</a>
    </li>
    <li>
      <a href="../articles/camtrapr4.html">4. Data exploration and visualisation</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/jniedballa/camtrapR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Copy and rename images based on camera trap station ID and creation date</h1>
    
    <div class="hidden name"><code>imageRename.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The function renames and copies raw camera trap images into a new location where they can be identified. Images are renamed with camera trap station ID, camera ID (optional), creation date and a numeric identifier for images taken within one minute of each other at a given station. Station ID and camera ID are derived from the raw image directory structure. The creation date is extracted from image metadata using ExifTool.</p>
    </div>

    <pre class="usage"><span class='fu'>imageRename</span><span class='op'>(</span><span class='va'>inDir</span>, 
  <span class='va'>outDir</span>, 
  <span class='va'>hasCameraFolders</span>,
  <span class='va'>keepCameraSubfolders</span>,
  createEmptyDirectories <span class='op'>=</span> <span class='cn'>FALSE</span>,
  copyImages <span class='op'>=</span> <span class='cn'>FALSE</span>, 
  writecsv <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>inDir</th>
      <td><p>character. Directory containing camera trap images sorted into station subdirectories (e.g. inDir/StationA/)</p></td>
    </tr>
    <tr>
      <th>outDir</th>
      <td><p>character. Directory into which the renamed images will be copied</p></td>
    </tr>
    <tr>
      <th>hasCameraFolders</th>
      <td><p>logical. Do the station directories in <code>inDir</code> have camera subdirectories (e.g. "inDir/StationA/Camera1")?</p></td>
    </tr>
    <tr>
      <th>keepCameraSubfolders</th>
      <td><p>logical. Should camera directories be preserved as subdirectories of <code>outDir</code> (e.g. "outDir/StationA/CameraA1")?</p></td>
    </tr>
    <tr>
      <th>createEmptyDirectories</th>
      <td><p>logical. If station or camera directories are empty, should they be copied nevertheless (causing empty directories in <code>inDir</code>, but preserving the whole directory structure)?</p></td>
    </tr>
    <tr>
      <th>copyImages</th>
      <td><p>logical. Copy images to <code>outDir</code>?</p></td>
    </tr>
    <tr>
      <th>writecsv</th>
      <td><p>logical. Save a data frame with a summary as a .csv? The csv will be saved in <code>outDir</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Setting up the correct raw image directory structure is necessary for running the function successfully. <code>inDir</code> is the main directory that contains camera trap station subdirectories (e.g. inDir/StationA). If one camera was deployed per station and no camera subdirectories are used within station directories, <code>hasCameraFolders</code> can be set to <code>FALSE</code>. If more than one camera was deployed at stations, there must be subdirectories for the individual camera traps within the station directories (e.g. "inDir/StationA/CameraA1" and "inDir/StationA/CameraA2"). Even if only some stations had multiple cameras, all station will need camera subdirectories. The argument <code>hasCameraFolders</code> must be <code>TRUE</code>. Within the camera subdirectories, the directory structure is irrelevant.</p>
<p>Renaming of images follows the following pattern: If <code>hasCameraFolders</code> is TRUE, it is: "StationID__CameraID__Date__Time(Number).JPG", e.g. "StationA__CameraA1__2015-01-31__18-59-59(1).JPG". If <code>hasCameraFolders</code> is FALSE, it is:  "StationID__Date__Time(Number).JPG", e.g. "StationA__2015-01-31__18-59-59(1).JPG".</p>
<p>The purpose of the number in parentheses is to prevent assigning identical file names to images taken at the same station (and camera) in the same second, as can happen if cameras take sequences of images. It is a consecutive number given to all images taken at the same station by the same camera within one minute. The double underscore "__" in the image file names is for splitting and extracting information from file names in other functions (e.g. for retrieving camera IDs in <code><a href='recordTable.html'>recordTable</a></code> if camera subdirectories are not preserved (<code>keepCameraSubfolders = FALSE</code>)).</p>
<p>The function finds all JPEG images and extracts the image timestamp from the image metadata using ExifTool and copies the images (with new file names) into <code>outDir</code>, where it will set up a directory structure based on the station IDs and, if required by <code>keepCameraSubfolders = TRUE</code>, camera IDs (e.g. outDir/StationA/ or outDir/StationA/CameraA1).</p>
<p><code>copyImages</code> can be set to FALSE to simulate the renaming and check the file names of the renamed images without copying. If you are handling large number of images (&gt;e.g., 100,000), the function may take some time to run.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>data.frame</code> with original directory and file names, new directory and file names and an indicator for whether images were copied successfully.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Phil Harvey's ExifTool <a href='https://exiftool.org/'>https://exiftool.org/</a></p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Juergen Niedballa</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>

  <span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
  
<span class='co'>### "trial" run. create a table with file names after renaming, but don't copy images.</span>

<span class='co'># first, find sample image directory in package directory:</span>
<span class='va'>wd_images_raw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"pictures/raw_images"</span>, package <span class='op'>=</span> <span class='st'>"camtrapR"</span><span class='op'>)</span>

<span class='co'># because copyImages = FALSE, outDir does not need to be defined</span>
<span class='va'>renaming.table</span> <span class='op'>&lt;-</span> <span class='fu'>imageRename</span><span class='op'>(</span>inDir               <span class='op'>=</span> <span class='va'>wd_images_raw</span>,     
                              hasCameraFolders <span class='op'>=</span> <span class='cn'>FALSE</span>,
                              copyImages          <span class='op'>=</span> <span class='cn'>FALSE</span>,
                              writecsv            <span class='op'>=</span> <span class='cn'>FALSE</span>
  <span class='op'>)</span>


  
<span class='co'>### a real example in which images are copied and renamed </span>

  <span class='co'># define raw image location</span>
<span class='va'>wd_images_raw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"pictures/raw_images"</span>, package <span class='op'>=</span> <span class='st'>"camtrapR"</span><span class='op'>)</span> 

  <span class='co'># define destination for renamed images</span>
<span class='va'>wd_images_raw_renamed</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>"raw_images_renamed"</span><span class='op'>)</span>       


  <span class='co'># now we have to define outDir because copyImages = TRUE</span>
<span class='va'>renaming.table2</span> <span class='op'>&lt;-</span> <span class='fu'>imageRename</span><span class='op'>(</span>inDir               <span class='op'>=</span> <span class='va'>wd_images_raw</span>,
                               outDir              <span class='op'>=</span> <span class='va'>wd_images_raw_renamed</span>,       
                               hasCameraFolders    <span class='op'>=</span> <span class='cn'>FALSE</span>,
                               copyImages          <span class='op'>=</span> <span class='cn'>TRUE</span>,
                               writecsv            <span class='op'>=</span> <span class='cn'>FALSE</span>
  <span class='op'>)</span>
  
  <span class='co'># show output files</span>
  <span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></span><span class='op'>(</span><span class='va'>wd_images_raw_renamed</span>, recursive <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
  
  <span class='co'># output table</span>
  <span class='va'>renaming.table2</span>
  
  <span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Juergen Niedballa, Alexandre Courtiol, Rahel Sollmann.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


